"0","#install.packages(""RMySQL"")"
"0","library(RMySQL)"
"0","#read in a table of known human oncogenes from the ONGene database"
"0","ongene = read.table(""http://ongene.bioinfo-minzhao.org/ongene_human.txt"", header = T, sep = ""\t"")"
"0","#send a sql query to UCSC to map the human oncogenes to ucsc isoform ids"
"0","ucsc_genome <- dbConnect(MySQL(), user=""genome"", "
"0","                         host=""genome-mysql.cse.ucsc.edu"", db = 'hg19')"
"0","createGeneQuery = function(name){ #name is a character vector"
"0","  p1 = paste(name, collapse = '\',\'')"
"0","  p2 = paste('(\'',p1, '\')',sep ="""")"
"0","  return(p2)"
"0","}"
"0","gene_q = createGeneQuery(ongene$OncogeneName)"
"0","query_res = dbGetQuery(ucsc_genome, paste0(""SELECT kgID, geneSymbol FROM kgXref WHERE geneSymbol IN "", gene_q, "" ;""))"
"0","dbDisconnect(ucsc_genome)"
"1","[1]"
"1"," TRUE"
"1","
"
"0","#Merge the query_res & mmParams dataframes"
"0","query_res$kgID.s = substr(query_res$kgID, 1,8)"
"0","mmParams$kgID.s = substr(rownames(mmParams), 1,8)"
"0","mmParams$kgID = rownames(mmParams)"
"0","mmParams.m = merge(mmParams, query_res, by = ""kgID.s"", all.x = T)"
"0","rownames(mmParams.m) = mmParams.m$kgID.x"
"0","# Show the top 5 isoforms with the highest score "
"0","#in our dataset that map to known oncogenes"
"0","mmParams.m = mmParams.m[with(mmParams.m, order(-score)), ]"
"0","mmParams.m.s = subset(mmParams.m, !is.na(geneSymbol))[1:5,]"
"0","print(mmParams.m.s)"
