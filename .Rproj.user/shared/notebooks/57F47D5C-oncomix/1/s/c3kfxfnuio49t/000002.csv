"0","##The code that follows was used to generate the `queryRes` object"
"0","##in September 2017."
"0","##"
"0","##install.packages(""RMySQL"")"
"0","##library(RMySQL)"
"0","##"
"0","##read in a table of known human oncogenes from the ONGene database"
"0","##ongene <- read.table(""http://ongene.bioinfo-minzhao.org/ongene_human.txt"","
"0","##    header=TRUE, sep=""\t"", quote="""", stringsAsFactors=FALSE, row.names=NULL)"
"0","##"
"0","##send a sql query to UCSC to map the human oncogenes to ucsc isoform ids"
"0","##ucscGenome <- dbConnect(MySQL(), user=""genome"", "
"0","##    host=""genome-mysql.cse.ucsc.edu"", db='hg19')"
"0","##createGeneQuery <- function(name){ #name is a character vector"
"0","##    p1 <- paste(name, collapse='\',\'')"
"0","##    p2 <- paste('(\'',p1, '\')',sep="""")"
"0","##    return(p2)"
"0","##}"
"0","##geneQ <- createGeneQuery(ongene$OncogeneName)"
"0","##queryRes <- dbGetQuery(ucscGenome, "
"0","##    paste0(""SELECT kgID, geneSymbol FROM kgXref WHERE geneSymbol IN "","
"0","##        geneQ, "" ;""))"
"0","##dbDisconnect(ucscGenome)"
"0","##The database mapping ucsc symbols to gene symbols is loaded below,"
"0","##without needing to access the internet."
"0","data(queryRes, package=""oncomix"")"
"0","##Merge the queryRes & mmParams dataframes"
"0","queryRes$kgIDs <- substr(queryRes$kgID, 1, 8)"
"0","mmParams$kgIDs <- substr(rownames(mmParams), 1, 8)"
"0","mmParams$kgID <- rownames(mmParams)"
"0","mmParamsMg <- merge(mmParams, queryRes, by=""kgIDs"", all.x=TRUE)"
"0","rownames(mmParamsMg) <- mmParamsMg$kgID.x"
"0","## Show the top 5 isoforms with the highest score "
"0","## in our dataset that map to known oncogenes"
"0","mmParamsMg <- mmParamsMg[with(mmParamsMg, order(-score)), ]"
"0","mmParamsMgSbst <- subset(mmParamsMg, !is.na(geneSymbol))[1:5,]"
"0","print(mmParamsMgSbst)"
